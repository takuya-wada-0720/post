<!DOCTYPE html>
<html lang="ja">
<head>
<script>
  getCSV()
  var tmp = [];
  var result = [];
//CSVファイルを読み込む関数getCSV()の定義
function getCSV(){
var req = new XMLHttpRequest(); // HTTPでファイルを読み込むためのXMLHttpRrequestオブジェクトを生成
req.open("get","https://takuya-wada-0720.github.io/test/data/hokkaido/hokkaido-001.csv",true); // アクセスするファイルを指定
req.send(null); // HTTPリクエストの発行

// レスポンスが返ってきたらconvertCSVtoArray()を呼ぶ
req.onload = function(){
convertCSVtoArray(req.responseText); // 渡されるのは読み込んだCSVデータ
    }
}
// 読み込んだCSVデータを二次元配列に変換する関数convertCSVtoArray()の定義
function convertCSVtoArray(str){ // 読み込んだCSVデータが文字列として渡される
 // 最終的な二次元配列を入れるための配列
tmp = str.split("\n"); // 改行を区切り文字として行を要素とした配列を生成

// 各行ごとにカンマで区切った文字列を要素とした二次元配列を生成
for(var i=0;i<tmp.length;++i){
result[i] = tmp[i].split(',');
    }
    console.log(result[0][0]);
}

function addValue(){
  var idname = "neko";
  s = document.getElementById(idname).value;
  if(s.length == 7) {
    for(var a=0; a < tmp.length; ++a) {
      if(s == result[a][0]) {
        var c = result[a][1]+result[a][2]+result[a][3]+result[a][4];
        document.getElementById("nekopv").value = c;
      }
    }
  }
  document.getElementById("test").innerHTML = s;
}

</script>
</head>
<body>
<input type="text" id="neko" onKeyUp="addValue()" size="42" style="font-size:25px;"/><br>
<input type="text" id="nekopv" size="42" style="font-size:25px;"/>
<h1 id="test"></h1>
</html>
